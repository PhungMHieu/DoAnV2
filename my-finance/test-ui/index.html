<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Finance - AI Auto-Categorization Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #333;
            margin-top: 10px;
            width: 100%;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .result-container {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .result-container h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .prediction-result {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .category-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1.1rem;
            background: #667eea;
            color: white;
        }

        .confidence-bar {
            flex: 1;
        }

        .confidence-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
        }

        .suggestions {
            margin-top: 15px;
        }

        .suggestion-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: white;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .suggestion-category {
            font-weight: 600;
            color: #333;
        }

        .suggestion-confidence {
            color: #667eea;
            font-weight: 600;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: #fee;
            color: #c00;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #c00;
        }

        .examples {
            margin-top: 20px;
        }

        .example-chip {
            display: inline-block;
            padding: 8px 15px;
            background: #f0f0f0;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .example-chip:hover {
            background: #667eea;
            color: white;
        }

        .config-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .config-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .config-row label {
            flex: 1;
            font-weight: 600;
            color: #333;
        }

        .config-row input {
            flex: 2;
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
        }

        .icon {
            font-size: 1.3rem;
        }

        .transaction-form {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }

        .category-display {
            margin-top: 15px;
            padding: 15px;
            background: #f0f7ff;
            border-radius: 8px;
            border: 2px dashed #667eea;
        }

        .category-display.empty {
            opacity: 0.5;
        }

        .category-display-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .category-display-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI Test Interface</h1>
            <p>My Finance - Amount Extraction & Auto-Categorization Testing</p>
        </div>

        <!-- Configuration Panel -->
        <div class="card">
            <h2>‚öôÔ∏è C·∫•u h√¨nh</h2>
            <div class="config-panel">
                <div class="config-row">
                    <label>ML Service URL:</label>
                    <input type="text" id="mlServiceUrl" value="http://localhost:3005">
                </div>
                <div class="config-row">
                    <label>Transaction Service URL:</label>
                    <input type="text" id="transactionServiceUrl" value="http://localhost:3001">
                </div>
            </div>
        </div>

        <div class="main-grid">
            <!-- Combined Analysis Form (NEW) -->
            <div class="card">
                <h2>üöÄ Test Combined Analysis</h2>
                <p style="color: #666; font-size: 0.9rem; margin-bottom: 15px;">
                    Tr√≠ch xu·∫•t s·ªë ti·ªÅn + D·ª± ƒëo√°n category trong m·ªôt l·∫ßn g·ªçi API
                </p>

                <form id="analyzeForm">
                    <div class="form-group">
                        <label for="analyzeText">VƒÉn b·∫£n giao d·ªãch:</label>
                        <textarea id="analyzeText" placeholder="V√≠ d·ª•: ƒÉn ph·ªü 50k, grab v·ªÅ nh√† 35 ngh√¨n" required></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary" id="analyzeBtn">
                        üîç Ph√¢n t√≠ch giao d·ªãch
                    </button>
                </form>

                <div class="examples">
                    <strong>V√≠ d·ª• nhanh:</strong>
                    <div class="example-chip" data-analyze="ƒÉn ph·ªü 50k">üçú Ph·ªü 50k</div>
                    <div class="example-chip" data-analyze="grab v·ªÅ nh√† 35 ngh√¨n">üöó Grab 35 ngh√¨n</div>
                    <div class="example-chip" data-analyze="mua laptop 1 tri·ªáu 500 ngh√¨n">üíª Laptop 1tr5</div>
                    <div class="example-chip" data-analyze="cafe highlands 45k">‚òï Cafe 45k</div>
                    <div class="example-chip" data-analyze="netflix 260000">üé¨ Netflix</div>
                    <div class="example-chip" data-analyze="shopee mua qu·∫ßn √°o 3 trƒÉm ngh√¨n">üõçÔ∏è Shopee</div>
                </div>

                <div class="loading" id="analyzeLoading">
                    <div class="spinner"></div>
                    <p>ƒêang ph√¢n t√≠ch...</p>
                </div>

                <div id="analyzeResultContainer"></div>
            </div>

            <!-- Amount Extraction Form -->
            <div class="card">
                <h2>üî¢ Test Amount Extraction</h2>

                <form id="extractForm">
                    <div class="form-group">
                        <label for="extractText">VƒÉn b·∫£n ti·∫øng Vi·ªát:</label>
                        <textarea id="extractText" placeholder="V√≠ d·ª•: ƒÉn ph·ªü 50k, mua laptop 1 tri·ªáu 500 ngh√¨n" required></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary" id="extractBtn">
                        Tr√≠ch xu·∫•t s·ªë ti·ªÅn
                    </button>
                </form>

                <div class="examples">
                    <strong>V√≠ d·ª• nhanh:</strong>
                    <div class="example-chip" data-extract="ƒÉn ph·ªü 50k">üçú 50k</div>
                    <div class="example-chip" data-extract="grab v·ªÅ nh√† 35 ngh√¨n">üöó 35 ngh√¨n</div>
                    <div class="example-chip" data-extract="mua √°o 2 trƒÉm ngh√¨n">üëï 2 trƒÉm ngh√¨n</div>
                    <div class="example-chip" data-extract="laptop 1 tri·ªáu 500 ngh√¨n">üíª 1tr5</div>
                    <div class="example-chip" data-extract="c√† ph√™ 45000">‚òï 45000</div>
                    <div class="example-chip" data-extract="ƒëi·ªán tho·∫°i 15.5 tri·ªáu">üì± 15.5 tri·ªáu</div>
                </div>

                <div class="loading" id="extractLoading">
                    <div class="spinner"></div>
                    <p>ƒêang tr√≠ch xu·∫•t...</p>
                </div>

                <div id="extractResultContainer"></div>
            </div>

            <!-- Predict Category Form -->
            <div class="card">
                <h2>üîÆ Test Category Prediction</h2>

                <form id="predictForm">
                    <div class="form-group">
                        <label for="note">M√¥ t·∫£ giao d·ªãch (Note):</label>
                        <textarea id="note" placeholder="V√≠ d·ª•: Mua c∆°m tr∆∞a qu√°n Ph·ªü 24" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="amount">S·ªë ti·ªÅn (Amount):</label>
                        <input type="number" id="amount" placeholder="50000">
                    </div>

                    <button type="submit" class="btn btn-primary" id="predictBtn">
                        D·ª± ƒëo√°n Category
                    </button>
                </form>

                <div class="examples">
                    <strong>V√≠ d·ª• nhanh:</strong>
                    <div class="example-chip" data-note="Mua c∆°m tr∆∞a qu√°n Ph·ªü 24" data-amount="50000">üçú Ph·ªü 24</div>
                    <div class="example-chip" data-note="Grab v·ªÅ nh√†" data-amount="30000">üöó Grab</div>
                    <div class="example-chip" data-note="Cafe Highlands Coffee" data-amount="45000">‚òï Highlands</div>
                    <div class="example-chip" data-note="Netflix subscription" data-amount="260000">üé¨ Netflix</div>
                    <div class="example-chip" data-note="Shopee mua qu·∫ßn √°o" data-amount="350000">üõçÔ∏è Shopee</div>
                    <div class="example-chip" data-note="Ti·ªÅn l∆∞∆°ng th√°ng 12" data-amount="15000000">üí∞ L∆∞∆°ng</div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>ƒêang d·ª± ƒëo√°n...</p>
                </div>

                <div id="resultContainer"></div>
            </div>

            <!-- Transaction Creation Form -->
            <div class="card">
                <h2>üìù Test Create Transaction v·ªõi AI</h2>

                <form id="transactionForm">
                    <div class="form-group">
                        <label for="txNote">M√¥ t·∫£ giao d·ªãch:</label>
                        <textarea id="txNote" placeholder="VD: ƒÉn ph·ªü 50k (AI s·∫Ω t·ª± tr√≠ch xu·∫•t s·ªë ti·ªÅn v√† g·ª£i √Ω category)" required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="txAmount">S·ªë ti·ªÅn (t√πy ch·ªçn):</label>
                            <input type="number" id="txAmount" placeholder="ƒê·ªÉ tr·ªëng n·∫øu ƒë√£ ghi trong m√¥ t·∫£">
                        </div>

                        <div class="form-group">
                            <label for="txDateTime">Ng√†y gi·ªù:</label>
                            <input type="datetime-local" id="txDateTime" required>
                        </div>
                    </div>

                    <div class="category-display empty" id="amountDisplay">
                        <div class="category-display-label">üî¢ S·ªë ti·ªÅn tr√≠ch xu·∫•t:</div>
                        <div class="category-display-value" id="extractedAmount">Ch∆∞a tr√≠ch xu·∫•t</div>
                    </div>

                    <div class="category-display empty" id="categoryDisplay">
                        <div class="category-display-label">ü§ñ AI Predicted Category:</div>
                        <div class="category-display-value" id="predictedCategory">Ch∆∞a c√≥ d·ª± ƒëo√°n</div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="autoSuggestBtn">
                        ‚ú® Auto-Extract Amount & Suggest Category
                    </button>

                    <button type="submit" class="btn btn-primary" id="createBtn">
                        T·∫°o Transaction
                    </button>
                </form>

                <div class="loading" id="txLoading">
                    <div class="spinner"></div>
                    <p>ƒêang x·ª≠ l√Ω...</p>
                </div>

                <div id="txResultContainer"></div>
            </div>
        </div>

        <!-- Multi-Transaction Analysis Test -->
        <div class="transaction-form">
            <h2 style="color: #667eea; margin-bottom: 20px;">üîÄ Test Multi-Transaction Analysis</h2>
            <p style="color: #666; font-size: 0.95rem; margin-bottom: 15px;">
                Ph√¢n t√≠ch vƒÉn b·∫£n ph·ª©c t·∫°p ch·ª©a nhi·ªÅu giao d·ªãch. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông t√°ch v√† ph√¢n t√≠ch t·ª´ng giao d·ªãch ri√™ng l·∫ª.
            </p>

            <div class="form-group">
                <label>VƒÉn b·∫£n ch·ª©a nhi·ªÅu giao d·ªãch:</label>
                <textarea id="multiInput" rows="4" placeholder="V√≠ d·ª•: t√¥i ƒëi ch∆°i v·ªõi b·∫°n v√† ƒë√£ mua 1 c√°i t·∫°p d·ªÅ 50k. Ch√∫ng t√¥i c√≤n ƒÉn ph·ªü 90k"></textarea>
            </div>

            <div class="examples" style="margin-bottom: 15px;">
                <strong>V√≠ d·ª• nhanh:</strong>
                <div class="example-chip" onclick="document.getElementById('multiInput').value='mua t·∫°p d·ªÅ 50k. ƒÉn ph·ªü 90k'">üõçÔ∏èüçú 2 giao d·ªãch</div>
                <div class="example-chip" onclick="document.getElementById('multiInput').value='s√°ng grab 30k v√† ƒÉn s√°ng 25k. tr∆∞a ƒëi ƒÉn c∆°m 50k'">üöóüçö 3 giao d·ªãch</div>
                <div class="example-chip" onclick="document.getElementById('multiInput').value='mua laptop 1 tri·ªáu 500 ngh√¨n c√≤n mua chu·ªôt 200k th√™m b√†n ph√≠m 350k'">üíªüñ±Ô∏è‚å®Ô∏è 3 giao d·ªãch</div>
            </div>

            <button class="btn btn-primary" id="multiAnalyzeBtn">
                üîç Ph√¢n t√≠ch nhi·ªÅu giao d·ªãch
            </button>

            <div class="loading" id="multiLoading">
                <div class="spinner"></div>
                <p>ƒêang ph√¢n t√≠ch...</p>
            </div>

            <div id="multiResultContainer"></div>
        </div>

        <!-- Batch Prediction Test -->
        <div class="transaction-form">
            <h2 style="color: #667eea; margin-bottom: 20px;">üìä Test Batch Prediction</h2>

            <div class="form-group">
                <label>Danh s√°ch giao d·ªãch (JSON Array):</label>
                <textarea id="batchInput" rows="8" style="font-family: monospace;">[
  {"note": "Mua c∆°m tr∆∞a", "amount": 50000},
  {"note": "Grab v·ªÅ nh√†", "amount": 30000},
  {"note": "Netflix th√°ng n√†y", "amount": 260000}
]</textarea>
            </div>

            <button class="btn btn-primary" id="batchPredictBtn">
                Batch Predict
            </button>

            <div class="loading" id="batchLoading">
                <div class="spinner"></div>
                <p>ƒêang x·ª≠ l√Ω batch...</p>
            </div>

            <div id="batchResultContainer"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
